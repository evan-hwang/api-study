## 2. 사용자를 위한 API 디자인하기

*사용자들에게 합리적이고 오해의 여지가 없어야한다.*

맹목적으로 데이터와 기능만 노출하는게 아니라 컨슈머의 관점에 중점을 두어야한다.  또한 방해될 수 있는 프로바이더 관점을 지양해야한다.



### 2.1 일상 속 사용자 인터페이스를 디자인하는 올바른 관점

*장막 너머에서 벌어지는 일에 집중하는 순간 총체적 난국이 펼쳐집니다. 사용자가 얻을 결과에만 집중해야합니다.*



#### 2.1.1 작업 방식에 집중하면 인터페이스가 복잡해진다

*장치(소프트웨어) 내부 동작 원리에 지나치게 몰입하고 있을 때면 꼭 복잡해진다.*

제품 생산자가 아는 내부 세부 구현에 대한 지식들을 인터페이스에 노출하면 사용자들은 알 수 없다.

- ex) 전자레인지
  - 마그네트론 작동 버튼 



#### 2.1.2 사용자가 할 수 있는 일에 집중하면 인터페이스는 단순해진다

컨슈머 관점의 API의 요소

- 이해하기 쉽다.
- 사용하기 쉽다.
- 할 수 있는 일을 표현한다.

제품 생산자 관점이 아닌 컨슈머 친화적인 인터페이스를 노출하자.

- ex) 전자레인지
  - 강도 조절 버튼, 시간 조절 버튼



### 2.2 소프트웨어 인터페이스 디자인 방법

*사용자가 할 수 있는 일에 집중합니다. 어떻게 동작하는지에 집중하지 맙시다.*



### 2.3 API의 목표 식별 과정

*컨슈머의 목표에 적합하게 만들어야한다. 목표 식별이 시작이다.*

컨슈머의 목표를 정확히 식벽하는 방법

1. 누가 사용하는가?
2. 무엇을 할 수 있는가?
3. 어떻게 하는가?
4. 하기 위해서 무엇이 필요한가?
5. 끝나면 무엇을 반환하는가?

> 이 도출 결과에 대해서 adoc으로 제공하자.
>
> ```java
> /**
>  * 게임 시작 요청													- 무엇을 하는가?
>  * - 내부 로직 설명												- 어떻게 하는가?
>  * @param storyId   스토리 아이디         - 무엇이 필요한가?
>  * @param chapterId 시작할 챕터 아이디
>  * @return 게임 시작 결과                 - 끝나면 무엇을 반환하는가?
>  */
> ```



#### 2.3.1 무엇을 어떻게 하는가

#### 2.3.2 어떤 걸 입력하고 어떤 게 출력되는가

#### 2.3.3 누락된 목표가 있는가

#### 2.3.4 모든 사용자를 찾아냈는가

#### 2.3.5 API 목표 캔버스

책으로 



### 2.4 API 디자인에서 피해야 할 프로바이더 관점

*시스템은 개발한 조직의 의사 소통 구조를 닮아간다. - 멜 콘웨이*

프로바이더의 관점에 크게 영향받은 API 디자인은 아래의 종류가 있다.



#### 2.4.1 데이터가 미치는 영향

API 디자인이 시스템 데이터(데이터베이스) 구조와 유사하게 표현되면 데이터베이스 모델이 외부에 노출되어 위험할 수 있고, 사용자 경험도 불편하게 한다.



#### 2.4.2 코드와 비즈니스 로직이 주는 영향

모든 비지니스 로직을 다 API로 구현하는 것이 아닌 사용자가 필요한 액션에 대해 추출이 필요하다.



#### 2.4.3 소프트웨어 아키텍처에서 받는 영향

소프트웨어 내부 아키텍처에 따라 API를 나눠주는 경우 사용자 친화적이지 않을 수 있다.

- A 시스템
  - 상품 설명 서비스
- B 시스템
  - 상품 검색 서비스 

이제 상품 목록을 뿌린다고 할 때 두 서비스라고 상품 설명 API, 상품 검색 API를 따로 제공하면 사용자는 불편하게 된다. 상품 조회 서비스로 하나로 묶도록하자.



#### 2.4.4 인적 조직으로 인한 영향

내부 부서에 따라서 API가 따로 나온다면 해당 조직의 내부 업무 방법이 노출된다. 컨슈머가 굳이 이에 대해 알필요 없지 않은가?



#### 2.4.5 API 목표 캔버스에서 프로바이더 관점 찾기

2.3 참고