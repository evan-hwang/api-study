# 2부 사용하기 좋은 API 디자인

*"사용하기 어려운  API에게 가치란 없습니다."*



## 5. 직관적인 API 디자인하기

이 장에서 다루는 내용

- 컨셉에 맞는 직관적 표현 만들기
- 관련된 에러의 성공 피드백 식별하기
- 효율적인 사용 흐름 디자인하기

사람들은 API의 사용성을 기대한다. 이 장에서는 가상의 은행을 예시로 API를 만들어볼 것이다.



### 5.1 직관적인 표현

내부의 복잡성을 감추는 것 뿐 아니라 사용자에게 노출되는 다음의 요소들은 API의 사용성에 큰 영향을 미친다.

- 이름
- 데이터 타입 및 포맷
- 데이터 관련 의사결정



#### 5.1.1 명확한 이름 정하기

*"이름은 반드시 컨슈머 입장에서 의미있는 것으로 정해야한다."*



은행 API는 계좌에 초과 인출 제한 기능 옵션이 활성화되었는지 비활성화 되었는지에 대한 정보를 제공해야한다. 

이에 대한 키로 `bkAccOverProFtActBln`를 설정하게 되었는데, 이는 딱 봐도 컨슈머가 이해하기는 너무 어렵다.


이를 컨슈머가 이해하기 쉽도록 다음의 절차를 통해 줄여보자.

1. `bankAccountOverdraftProtectionFeatureActiveBln`
   - 약어를 사용하지말자. (하지만 max나 min처럼 일반적으로 받아들여지는 약어는 괜찮다.)
2. `bankAccountOverdraftProtectionFeature`
   - 내부 코딩 규칙을 노출하지말자. 
   - 해당 값이 Boolean 인지는 내부 로직이고 문서를 통해서도 드러낼 수 있다.
3. `bankAccountOverdraftProtection`
   - API 문서를 통해 알 수 있는 정보는 배제한다.
   - 은행 계좌 재산/서비스라는 의미는 문서의 설명으로 표현 가능하다.
4. `overdraftProtection`
   - 도메인에 종속적인 당연한 것들은 배제한다.
   - 이미 bankAccount에 종속된 API이다.



#### 5.1.2 사용하기 쉬운 데이터 타입과 포맷 정하기

*"API 응답의 데이터 타입과 포맷은 반드시 인간 중심적이어야한다."*



예를 들어

- 날짜

  - 불편한 포맷 : 1423425300
  - 편한 포맷 : "2015-02-07"

- 타입

  - 불편한 포맷 : 1
  - 편한 포맷 : "checking"

  

> ❓ 타임스탬프를 넘겨야하는 경우가 있는가?
>
> 사내 서비스에서는 클라이언트가 현재 로컬 위치에 따라 타임스탬프 값을 변경해서 사용하도록 하고 있다. 이를 편의성을 포함하는 포맷으로 해당 기능을 잃지 않으면서 넘기는 방법이 있을까?



#### 5.1.3 바로 사용할 수 있는 데이터 선택하기

*"컨슈머가 바로 사용할 수 있는 데이터를 제공하자"*



예를 들어

- `createDate` 대신 계좌가 개설 후 몇년이 지난지만 알면되므로 `yearsOpen` 으로 전달
- `balance` 로 잔고만 전달하는 대신 `currency` 를 포함하여 통화 정보도 알려주기



### 5.2 직관적인 상호작용

#### 5.2.1 직관적인 입력 요청하기

#### 5.2.2 발생 가능한 모든 에러 피드백 식별하기

#### 5.2.3 유용한 에러 피드백 반환하기

#### 5.2.4 철저한 에러 피드백 반환하기

#### 5.2.5 유용한 성공 피드백 반환하기

### 5.3 직관적인 흐름

#### 5.3.1 직관적인 목표 연쇄 만들기

#### 5.3.2 에러 방지

#### 5.3.3 목표 통합

#### 5.3.4 상태가 없는 흐름 디자인하기